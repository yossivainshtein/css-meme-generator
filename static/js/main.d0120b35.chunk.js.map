{"version":3,"sources":["MemeInsertion.tsx","controls/InputWithLabel.js","models/MemeTemplate.ts","controls/EditableLabel.tsx","controls/CssEditor.tsx","MemeInsertionEditor.tsx","MemeEditor.tsx","MemeGenerator.tsx","index.js"],"names":["observer","Object","fromEntries","this","props","tag","css","filter","is_active","map","prop","value","className","style","getStyle","text","React","Component","InputWithLabel","InputGroup","Prepend","Text","label","FormControl","type","onChange","name","placeholder","step","CssProp","makeAutoObservable","MemeTag","entries","boyfriendTemplate","image_url","tags","left","top","color","EditableLabel","spanRef","createRef","valueAtStartOfEditing","current","classList","toggle","select","innerText","undefined","onValueChange","event","key","blur","currentTarget","match","exec","num_str","units","diff","num","parseInt","preventDefault","onTabPressed","ref","onFocus","startEdit","onBlur","finishEdit","onInput","handleChange","width","length","onKeyDown","e","keyDownHandler","target","cssProp","index","CssPropEditor","onBlurInside","splice","onTabPressedOnValue","push","tabindex","defaultChecked","setText","src","template","alt","i","MemeGenerator","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.d0120b35.chunk.js","sourcesContent":["import { observer } from 'mobx-react';\nimport React from 'react';\nimport { WithMemeTag } from './models/MemeTemplate';\n\nexport default observer(\n    class MemeInsertion extends React.Component<WithMemeTag> {\n        private getStyle() {\n            return Object.fromEntries(this.props.tag.css.filter(({is_active}) => is_active).map(({prop, value}) => [prop, value]))\n        }\n\n        render() {\n            return <p className=\"memeInsertion\" style={ this.getStyle() }>{this.props.tag.text}</p>\n        }\n    }\n)","import React from 'react';\nimport InputGroup from 'react-bootstrap/InputGroup'\nimport FormControl from 'react-bootstrap/FormControl'\n\n\nexport default class InputWithLabel extends React.Component {\n    render() {\n        return <InputGroup className=\"mb-3\">\n        <InputGroup.Prepend>\n            <InputGroup.Text>{this.props.label}</InputGroup.Text>\n        </InputGroup.Prepend>\n        <FormControl type={this.props.type} \n                     value={this.props.value} \n                     onChange={this.props.onChange} \n                     name={this.props.name} \n                     placeholder={this.props.placeholder} step={this.props.step}/>\n      </InputGroup>\n    }\n}","import { makeAutoObservable } from \"mobx\"\n\nexport class CssProp {\n    \n    public prop: string\n    public value: string\n    public is_active: boolean\n\n    constructor(prop: string, value: string) {\n        makeAutoObservable(this)\n        this.prop = prop\n        this.value = value\n        this.is_active = true\n    }\n}\n\nexport class MemeTag {\n    text: string\n    css: Array<CssProp>\n\n    constructor(text: string, style: React.CSSProperties) {\n        makeAutoObservable(this)\n        this.text = text\n        this.css = Object.entries(style).map(([prop, value]) => new CssProp(prop, value))\n    }\n\n    setText(text: string) {\n        this.text = text\n    }\n}\n\nexport class MemeTemplate {\n    image_url: string\n    tags: MemeTag[]\n\n    constructor(image_url: string, tags: MemeTag[]) {\n        makeAutoObservable(this)\n\n        this.image_url = image_url\n        this.tags = tags\n    }\n}\n\nexport const boyfriendTemplate = new MemeTemplate('https://imgflip.com/s/meme/Distracted-Boyfriend.jpg', \n    [\n        new MemeTag('usa', { left: '23%', top: '72%' }),\n        new MemeTag('corona virus', { left: '47%', top: '50%' }),\n        new MemeTag('china', {  left : '75%', top: '65%' ,color: 'red'}),\n    ]\n)\n \n\nexport interface WithMemeTemplate {\n    template: MemeTemplate\n}\n\nexport interface WithMemeTag {\n    tag: MemeTag\n}\n  ","import React from 'react';\n\ninterface EditableLabelProps {\n    value: string\n    onValueChange: (value: string) => void\n    onTabPressed?: () => void\n}\nexport default class EditableLabel extends React.Component<EditableLabelProps> {\n    private spanRef = React.createRef<HTMLInputElement>()\n    private valueAtStartOfEditing: string | null = null\n\n    startEdit() {\n        this.spanRef?.current?.classList.toggle('edit')\n        this.spanRef?.current?.select()\n        this.valueAtStartOfEditing = this.props.value\n    }\n\n    handleChange() {\n        const value = this.spanRef?.current?.innerText\n        if (value !== undefined && value !== null) {\n            this.props.onValueChange(value)\n        }\n    }\n\n    finishEdit() {\n        this.spanRef?.current?.classList.toggle('edit')        \n    }\n\n    keyDownHandler(event: React.KeyboardEvent<HTMLInputElement>) {\n        const key = event.key\n        switch(key) {\n            case \"Escape\":\n                this.valueAtStartOfEditing && this.props.onValueChange(this.valueAtStartOfEditing)\n                this.spanRef?.current?.blur()\n                break;\n            case \"Enter\":\n                this.spanRef?.current?.blur()\n                break;\n            case \"ArrowUp\":\n            case \"ArrowDown\":\n                const value = event.currentTarget.value\n                const match = /(\\d+)(\\%)/g.exec(value)\n                if (match) {\n                    let [_, num_str, units] = match\n                    let diff = key === 'ArrowUp' ? +1 : -1\n                    let num = parseInt(num_str)\n                    num += diff\n                    this.props.onValueChange('' + num + units)\n                }\n                event.preventDefault()\n                break;\n            case \"Tab\":\n                this.props.onTabPressed?.()\n                break\n        }\n    }\n\n    render() {\n        return (<input \n                  ref={this.spanRef} \n                  className=\"cssLabel\" \n                  onFocus={ () => this.startEdit() }\n                  onBlur={ () => this.finishEdit() }\n                  onInput= { () => this.handleChange() } \n                  value = { this.props.value }\n                  style = {{\n                    width: `${this.props.value.length}ch`\n                  }}\n                  onKeyDown = { (e) => this.keyDownHandler(e) }\n                  onChange = { (e) => this.props.onValueChange(e.target.value)}\n                 /> \n                \n                )\n            \n\n    }\n}","import { observer } from 'mobx-react';\nimport React from 'react';\nimport { CssProp } from '../models/MemeTemplate';\nimport EditableLabel from './EditableLabel'\n\n\ninterface CssEditorProps {\n    css: Array<CssProp>\n}\nexport default observer(\n    class CssEditor extends React.Component<CssEditorProps> {\n        render() {\n            return (  \n                <p className=\"cssEditor\">\n                    { \n                        this.props.css.map((cssProp, index) => <CssPropEditor {...{\n                            cssProp,\n                            onBlurInside: () => {\n                                if (cssProp.prop === '' && cssProp.value === '') {\n                                    this.props.css.splice(index, 1)\n                                }\n                            },\n                            ...(index === this.props.css.length - 1 && { onTabPressedOnValue: () => { this.props.css.push(new CssProp('', '')) }})\n                        }} />)\n                    }           \n                </p>\n        )}\n    })\n\ninterface CssPropEditorProps {\n    cssProp: CssProp\n    onTabPressedOnValue?: () => void\n    onBlurInside: () => void\n}\nconst CssPropEditor = observer(class CssPropEditorInner extends React.Component<CssPropEditorProps> {\n    render() {\n        return (<div className=\"cssValueContainerBox\" onBlur={(e) => { this.props.onBlurInside() }}>\n                    <input {...{\n                        tabindex: 0,\n                        className: 'cssPropertyCheckbox',\n                        type: \"checkbox\",\n                        defaultChecked: this.props.cssProp.is_active,\n                        onChange: () => {\n                            this.props.cssProp.is_active = !this.props.cssProp.is_active\n                        }\n                    }}/>\n                    <EditableLabel \n                        value={this.props.cssProp.prop} \n                        onValueChange={(value: string) => { this.props.cssProp.prop = value }}/>\n                    :\n                    <EditableLabel \n                        value={this.props.cssProp.value} \n                        onTabPressed={this.props.onTabPressedOnValue}\n                        onValueChange={(value: string) => { this.props.cssProp.value = value }}/>\n                </div>)\n            }\n})\n    ","import React, { ChangeEvent } from 'react';\nimport InputWithLabel from './controls/InputWithLabel'\nimport CssEditor from './controls/CssEditor'\nimport { WithMemeTag } from './models/MemeTemplate';\nimport { observer } from 'mobx-react';\n\ninterface MemeInsertionEditorProps extends WithMemeTag {\n    index: number\n}\nexport default observer(class MemeInsertionEditor extends React.Component<MemeInsertionEditorProps> {\n    render() {\n        return (  \n        <div>\n            <InputWithLabel \n                label={ \"Text #\" + (this.props.index+1) } \n                value={ this.props.tag.text } \n                onChange= { (e: ChangeEvent<HTMLInputElement>) => this.props.tag.setText(e.target.value) }/>\n            <CssEditor css={ this.props.tag.css }/>\n        </div>\n    )}\n})","import { observer } from 'mobx-react';\nimport React from 'react';\nimport MemeInsertion from './MemeInsertion'\nimport MemeInsertionEditor from './MemeInsertionEditor'\nimport { WithMemeTemplate } from './models/MemeTemplate';\n\nexport default observer(\n  class MemeEditor extends React.Component<WithMemeTemplate> {\n    render() {\n      return  (\n        <div className=\"memeEditor\">\n          <div className=\"memePreview\">\n            <img className=\"memeImage\" src={this.props.template.image_url} alt=\"memeImage\"/>\n            { this.props.template.tags.map((tag, i) => <MemeInsertion key={i} tag={tag} />) }\n          </div>\n\n          <div className=\"insertionEditor\">\n            { this.props.template.tags.map((tag, i) => <MemeInsertionEditor index={i} tag={tag} />) }\n          </div>\n        </div>\n      );\n    }\n  }\n)","import React from 'react';\nimport MemeEditor from './MemeEditor'\nimport { boyfriendTemplate } from './models/MemeTemplate'\n\nexport default class MemeGenerator extends React.Component {    \n    render() {\n        return (\n          <div className=\"container\">\n            <header className=\"header\">Meme generator with CSS</header>\n            <MemeEditor template={ boyfriendTemplate }/>\n            <footer className=\"footer\">footer</footer>\n          </div>\n        );\n      }\n    }","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './index.css';\nimport MemeGenerator from './MemeGenerator'\n\n\n\nReactDOM.render(\n    <MemeGenerator/>,\n    document.getElementById('root')\n  );\n  "],"sourceRoot":""}